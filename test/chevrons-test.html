<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chevron Tabs — CSS clip-path (Left arrow + forward chevrons)</title>
<style>
  :root{
    --h: 56px;         /* strip height */
    --tip: 22px;       /* width of right-pointing arrow tip */
    --tail: 14px;      /* slanted tail inset on left side of non-first tabs */
    --gap: 0px;        /* horizontal gap (usually 0; overlap hides seams) */

    --accent-start: #2e7df6;
    --accent-end:   #7aa8ff;
    --nav-bg:       #ffffff;
    --text-primary: #0b1f33;
    --text-muted:   #5a6b82;
    --brand-blue:   #2e7df6;
    --body-bg:      #f7f9fc;
  }

  html, body {
    margin:0; padding:0;
    background:var(--body-bg); color:var(--text-primary);
    font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
  }
  .wrap { max-width: 1100px; margin: 24px auto; padding: 0 16px; }

  /* ---------- NAV STRIP (separate wrapper so left tip isn't clipped) ---------- */
  .chevron-strip {
    display: flex;
    align-items: stretch;
    height: var(--h);
    gap: var(--gap);
    /* Important: let tips overflow naturally */
    overflow: visible;
  }

  .tab {
    position: relative;
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: 0 18px;
    min-width: 120px;    /* sensible minimum; grows with flex */
    height: 100%;
    flex: 1 1 0;
    cursor: pointer;
    background: #fff;
    color: var(--text-muted);
    font-weight: 600;
    border: 0;           /* we hide seams via overlap instead of borders */
    outline: none;
    /* overlap so left tabs sit on top and hide any seams */
    margin-left: calc(var(--tip) * -1);
    z-index: 1;
  }

  /* First tab sits on the far left – don’t overlap it backwards */
  .tab:first-child { margin-left: 0; }

  /* Active + hover fill */
  .tab.is-active {
    color: #fff;
    background: linear-gradient(90deg, var(--accent-start), var(--accent-end));
  }
  .tab:not(.is-active):hover {
    background: #eaf2ff;
  }

  /* Text should not intercept pointer when clicking on edges */
  .tab > span { pointer-events: none; }

  /* ----- Shapes via clip-path ----- */

  /* First tab (true left arrow head + right tip) */
  .tab:first-child {
    clip-path: polygon(
      0% 50%,
      var(--tip) 0%,
      calc(100% - var(--tip)) 0%,
      100% 50%,
      calc(100% - var(--tip)) 100%,
      var(--tip) 100%
    );
  }

  /* Middle tabs (slanted left tail + right tip) */
  .tab:not(:first-child):not(:last-child) {
    clip-path: polygon(
      var(--tail) 0%,
      calc(100% - var(--tip)) 0%,
      100% 50%,
      calc(100% - var(--tip)) 100%,
      0% 100%
    );
  }

  /* Last tab (slanted left tail + flat right end) */
  .tab:last-child {
    clip-path: polygon(
      var(--tail) 0%,
      100% 0%,
      100% 100%,
      0% 100%
    );
  }

  /* Focus ring for accessibility (follows clipped shape using outline + offset) */
  .tab:focus-visible {
    outline: 3px solid #94b8ff;
    outline-offset: 2px;
  }

  /* ---------- PANELS (rounded container is separate, no clipping of left tip) ---------- */
  .tabs-box{
    margin-top: 8px;
    background: var(--nav-bg);
    border: 2px solid var(--brand-blue);
    border-radius: 10px;
    overflow: hidden;
  }

  .panels{
    background: var(--body-bg);
    padding: 16px;
    border-top: 1px solid var(--brand-blue);
  }
  .panel{ display:none; }
  .panel.active{ display:block; }

  /* Mobile: allow tabs to be wider/taller */
  @media (max-width: 560px){
    :root { --h: 64px; --tip: 20px; --tail: 12px; }
    .tab { min-width: 100px; padding: 0 12px; font-size: 14px; }
  }

  /* Fallback if clip-path isn't supported: just show rectangles */
  @supports not (clip-path: polygon(0 0)) {
    .tab, .tab:first-child, .tab:last-child { clip-path: none; margin-left: 0; }
  }
</style>
</head>
<body>
<div class="wrap">
  <h2>Road Safety Audit Stages — Left arrow + forward chevrons</h2>

  <!-- Chevron strip is separate so the left arrow tip is never clipped -->
  <div id="chevronStrip" class="chevron-strip" role="tablist" aria-label="RSA stages tabs">
    <button class="tab is-active" role="tab" id="t0" aria-selected="true" aria-controls="p0"><span>Interim</span></button>
    <button class="tab" role="tab" id="t1" aria-selected="false" aria-controls="p1"><span>Stage 1</span></button>
    <button class="tab" role="tab" id="t2" aria-selected="false" aria-controls="p2"><span>Stage 2<br>&amp; Combined Stage 1–2</span></button>
    <button class="tab" role="tab" id="t3" aria-selected="false" aria-controls="p3"><span>Stage 3</span></button>
    <button class="tab" role="tab" id="t4" aria-selected="false" aria-controls="p4"><span>Stage 4</span></button>
  </div>

  <div class="tabs-box">
    <div class="panels" id="panels">
      <section id="p0" class="panel active" role="tabpanel" aria-labelledby="t0">
        <h3>Interim Road Safety Audit</h3>
        <p>Interim content…</p>
      </section>
      <section id="p1" class="panel" role="tabpanel" aria-labelledby="t1">
        <h3>Stage 1 Road Safety Audit</h3>
        <p>Stage 1 content…</p>
      </section>
      <section id="p2" class="panel" role="tabpanel" aria-labelledby="t2">
        <h3>Stage 2 &amp; Combined Stage 1–2</h3>
        <p>Stage 2 + Combined content…</p>
      </section>
      <section id="p3" class="panel" role="tabpanel" aria-labelledby="t3">
        <h3>Stage 3 Road Safety Audit</h3>
        <p>Stage 3 content…</p>
      </section>
      <section id="p4" class="panel" role="tabpanel" aria-labelledby="t4">
        <h3>Stage 4 Road Safety Audit</h3>
        <p>Stage 4 content…</p>
      </section>
    </div>
  </div>
</div>

<script>
(function(){
  const strip = document.getElementById('chevronStrip');
  const tabs  = Array.from(strip.querySelectorAll('.tab'));
  const panels= Array.from(document.querySelectorAll('.panel'));

  // Ensure left tabs paint on top to hide seams (leftmost highest z-index)
  tabs.forEach((tab, i) => {
    tab.style.zIndex = String(1000 - i);
  });

  function activate(idx){
    tabs.forEach((t,i)=>{
      const active = i === idx;
      t.classList.toggle('is-active', active);
      t.setAttribute('aria-selected', active ? 'true':'false');
      t.setAttribute('tabindex', active ? '0' : '-1');
    });
    panels.forEach((p,i)=>{
      const active = i === idx;
      p.classList.toggle('active', active);
      p.setAttribute('aria-hidden', active ? 'false' : 'true');
    });
    tabs[idx].focus({preventScroll:true});
  }

  tabs.forEach((t, i)=>{
    t.addEventListener('click', ()=> activate(i));
    t.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); activate(i); }
      if(e.key === 'ArrowRight' || e.key === 'ArrowLeft'){
        e.preventDefault();
        const dir = e.key === 'ArrowRight' ? 1 : -1;
        const next = (i + dir + tabs.length) % tabs.length;
        activate(next);
      }
    });
  });

  // Init aria/tabindex
  tabs.forEach((t, i)=> t.setAttribute('tabindex', i===0 ? '0' : '-1'));
})();
</script>
</body>
</html>
