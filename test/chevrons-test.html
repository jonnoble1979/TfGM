<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Chevron Tabs — Pure CSS Border Triangles</title>
<style>
  :root{
    --h: 56px;        /* nav height */
    --tip: 22px;      /* arrow tip width */
    --brand: #2e7df6; /* active fill */
    --hover: #eaf2ff; /* hover fill for inactive */
    --muted: #5a6b82; /* inactive text */
    --body:  #f7f9fc; /* page bg */
  }

  html, body { margin:0; padding:0; background:var(--body); font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif; }
  .wrap { max-width:1100px; margin:24px auto; padding:0 16px; }

  /* ---- Chevron strip sits OUTSIDE rounded container (so left tip isn't clipped) ---- */
  .chevron-nav {
    display:flex;
    align-items:stretch;
    height:var(--h);
    overflow:visible;      /* important: let arrow tips overflow */
    gap:0;                 /* we overlap instead of gapping */
  }

  .tab {
    --fill: #fff;          /* default background (inactive) */
    --text: var(--muted);  /* default text */
    position:relative;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:0 18px;
    min-width:120px;       /* grows with flex */
    height:100%;
    flex:1 1 0;
    background:var(--fill);
    color:var(--text);
    font-weight:600;
    border:0;
    cursor:pointer;
    margin-left: calc(var(--tip) * -1);  /* overlap the previous tab’s tip */
    outline:none;
    line-height:1.2;
    text-align:center;
  }
  .tab:first-child { margin-left:0; }     /* nothing to overlap on the far left */

  /* Active + hover colors flow to the triangles via --fill */
  .tab.is-active { --fill: var(--brand); --text:#fff; }
  .tab:not(.is-active):hover { --fill: var(--hover); }

  /* Right-pointing tip for all but the last */
  .tab::after{
    content:"";
    position:absolute; top:0; right: calc(var(--tip) * -1);
    width:0; height:0;
    border-top: calc(var(--h)/2) solid transparent;
    border-bottom: calc(var(--h)/2) solid transparent;
    border-left: var(--tip) solid var(--fill); /* triangle color = tab fill */
  }
  .tab:last-child::after{ display:none; }

  /* TRUE left arrow head on the FIRST tab */
  .tab:first-child::before{
    content:"";
    position:absolute; top:0; left: calc(var(--tip) * -1);
    width:0; height:0;
    border-top: calc(var(--h)/2) solid transparent;
    border-bottom: calc(var(--h)/2) solid transparent;
    border-right: var(--tip) solid var(--fill); /* triangle points LEFT */
  }

  /* Accessibility focus ring */
  .tab:focus-visible{
    outline:3px solid #94b8ff;
    outline-offset:2px;
  }

  /* ---- Panels are in their own rounded box (no clipping of the left arrow) ---- */
  .tabs-box{
    margin-top:8px;
    background:#fff;
    border:2px solid var(--brand);
    border-radius:10px;
    overflow:hidden;
  }
  .panels{ padding:16px; background:var(--body); border-top:1px solid var(--brand); }
  .panel{ display:none; }
  .panel.active{ display:block; }

  /* Mobile tweaks */
  @media (max-width:560px){
    :root { --h: 64px; --tip: 18px; }
    .tab { min-width:100px; padding:0 12px; font-size:14px; }
  }
</style>
</head>
<body>
<div class="wrap">
  <h2>Road Safety Audit Stages — Pure CSS chevrons (first is a left arrow)</h2>

  <!-- Chevron nav (separate, so left arrow head never gets clipped) -->
  <div id="chevronNav" class="chevron-nav" role="tablist" aria-label="RSA stages tabs">
    <button class="tab is-active" role="tab" id="t0" aria-selected="true" aria-controls="p0">
      Interim
    </button>
    <button class="tab" role="tab" id="t1" aria-selected="false" aria-controls="p1">
      Stage 1
    </button>
    <button class="tab" role="tab" id="t2" aria-selected="false" aria-controls="p2">
      Stage 2<br>&amp; Combined Stage 1–2
    </button>
    <button class="tab" role="tab" id="t3" aria-selected="false" aria-controls="p3">
      Stage 3
    </button>
    <button class="tab" role="tab" id="t4" aria-selected="false" aria-controls="p4">
      Stage 4
    </button>
  </div>

  <div class="tabs-box">
    <div class="panels" id="panels">
      <section id="p0" class="panel active" role="tabpanel" aria-labelledby="t0">
        <h3>Interim Road Safety Audit</h3><p>Interim content…</p>
      </section>
      <section id="p1" class="panel" role="tabpanel" aria-labelledby="t1">
        <h3>Stage 1 Road Safety Audit</h3><p>Stage 1 content…</p>
      </section>
      <section id="p2" class="panel" role="tabpanel" aria-labelledby="t2">
        <h3>Stage 2 &amp; Combined Stage 1–2</h3><p>Stage 2 + Combined content…</p>
      </section>
      <section id="p3" class="panel" role="tabpanel" aria-labelledby="t3">
        <h3>Stage 3 Road Safety Audit</h3><p>Stage 3 content…</p>
      </section>
      <section id="p4" class="panel" role="tabpanel" aria-labelledby="t4">
        <h3>Stage 4 Road Safety Audit</h3><p>Stage 4 content…</p>
      </section>
    </div>
  </div>
</div>

<script>
(function(){
  const tabs   = Array.from(document.querySelectorAll('.tab'));
  const panels = Array.from(document.querySelectorAll('.panel'));

  // Ensure left tabs paint on top (so their tips cover seams)
  tabs.forEach((t, i) => t.style.zIndex = String(1000 - i));

  function activate(idx){
    tabs.forEach((t,i)=>{
      const on = i===idx;
      t.classList.toggle('is-active', on);
      t.setAttribute('aria-selected', on ? 'true':'false');
      t.setAttribute('tabindex', on ? '0':'-1');
    });
    panels.forEach((p,i)=>{
      const on = i===idx;
      p.classList.toggle('active', on);
      p.setAttribute('aria-hidden', on ? 'false':'true');
    });
    tabs[idx].focus({preventScroll:true});
  }

  tabs.forEach((t,i)=>{
    t.addEventListener('click', ()=> activate(i));
    t.addEventListener('keydown', (e)=>{
      if(e.key === 'Enter' || e.key === ' '){ e.preventDefault(); activate(i); }
      if(e.key === 'ArrowRight' || e.key === 'ArrowLeft'){
        e.preventDefault();
        const dir = e.key === 'ArrowRight' ? 1 : -1;
        const next = (i + dir + tabs.length) % tabs.length;
        activate(next);
      }
    });
  });

  // Init
  tabs.forEach((t,i)=> t.setAttribute('tabindex', i===0 ? '0':'-1'));
})();
</script>
</body>
</html>
