<div class="procedure-app-container">
    <h2>Road Safety Audit Procedure Details</h2>

    <div id="filter-controls" class="filter-controls">
        <div class="control-group">
            <label for="filter-heading">Filter by Heading:</label>
            <select id="filter-heading" onchange="applyFilters()">
                <option value="">All Headings</option>
            </select>
        </div>

        <div class="control-group">
            <label for="filter-subheading">Filter by Subheading:</label>
            <select id="filter-subheading" onchange="applyFilters()">
                <option value="">All Subheadings</option>
            </select>
        </div>

        <div class="control-group checkbox-group">
            <input type="checkbox" id="filter-mandatory" onchange="applyFilters()">
            <label for="filter-mandatory">Show Mandatory Only</label>
        </div>

        <div class="control-group search-group">
            <label for="search-text">Search Text:</label>
            <input type="text" id="search-text" oninput="applyFilters()" placeholder="Search text content...">
        </div>
    </div>

    <div id="procedures-results" class="procedures-results">
        <p>Loading procedure data from data/procedures.json...</p>
    </div>
</div>

<script>
    // This calls the loader function defined in the procedure script on page load.
    document.addEventListener('DOMContentLoaded', () => {
        // Only run if the function is available (the script has loaded)
        if (typeof loadProcedures === 'function') {
            loadProcedures();
        }
        
        // Also attach the search input listener here, similar to your existing script
        const input = document.getElementById('search-text');
        if (input) {
            input.addEventListener('input', applyFilters);
        }
    });
</script>
