
/* 1) Set an accent and current background token the icon can “see” */
:where(p).mandatory {
  /* Your existing grid, padding, border, background … */
  display: grid;
  grid-template-columns: max-content 1fr;
  column-gap: .6rem;
  align-items: start;

  /* Accent used for both the triangle and the label text */
  color: var(--mandy-accent, #2563eb);

  /* Exclamation mark should match the paragraph background.
     We expose a 'current' bg token so hover can update it cleanly. */
  --mandy-bg-current: var(--mandy-bg, transparent);
}

/* If you change bg on hover/focus, update the 'current bg' too */
:where(p).mandatory:hover,
:where(p).mandatory:focus-within {
  --mandy-bg-current: var(--mandy-bg-hover, var(--mandy-bg, transparent));
}

/* Keep paragraph content in column 2 */
:where(p).mandatory > * { grid-column: 2; }

/* 2) Icon (triangle) + label share the same grid cell so they stay together */
:where(p).mandatory::before,
:where(p).mandatory::after {
  grid-column: 1;
  grid-row: 1;
  justify-self: center;
  align-self: start;
}

/* 3) Triangle with a “knockout” exclamation mark in bg color */
:where(p).mandatory::before {
  content: "";
  /* Triangle size — make it bigger/smaller here */
  --mandy-icon-size: 2.8em;
  width: var(--mandy-icon-size);
  height: var(--mandy-icon-size);

  /* Triangle color = same as text */
  background-color: currentColor;

  /* Knockout “!” drawn as two gradient layers in the paragraph bg color */
  background-image:
    /* vertical bar of the exclamation mark */
    linear-gradient(var(--mandy-bg-current), var(--mandy-bg-current)),
    /* dot of the exclamation mark */
    radial-gradient(circle, var(--mandy-bg-current) 60%, transparent 61%);
  background-repeat: no-repeat;
  /* Sizes relative to triangle — tweak to taste */
  background-size:
    12% 46%,   /* bar: width × height */
    12% 12%;   /* dot: diameter × diameter */
  background-position:
    50% 42%,   /* bar: centered, about 42% from top */
    50% 82%;   /* dot: centered, near bottom */

  /* Clip the square into a triangle */
  clip-path: polygon(50% 0%, 100% 100%, 0% 100%);
}

/* 4) Label below the icon (same color as triangle) */
:where(p).mandatory::after {
  content: "Mandatory";      /* no uppercase */
  display: block;
  text-align: center;
  color: currentColor;
  font-weight: 700;
  font-size: .8em;
  line-height: 1.1;
  letter-spacing: .01em;

  /* Sit just under the icon with a small gap */
  margin-top: calc(var(--mandy-icon-size) + .18rem);
}
